# UML第八章 状态图

- 什么是状态图，如何使用它
- 如何使用事件、动作和保护条件
- 如何对子状态，历史状态和连接点建模

## 8.1 什么是状态图

- 状态图
  - 描述了一个对象所处的可能状态以及状态之间的转换，并给出了状态变化序列的起点到终点
  - 又名：
    - 状态机
    - 状态表
- <font color="red">状态图只能对单个对象创建</font>
- <font color="red">类图、对象图和用例图对一个系统，或一组类、对象或用例建立模型</font>

- <font color="green">行为元素</font>

- <font color="00C5FFFF">一些约定</font>:
  - 通常状态名的首字母要大写
  - 最好以“ing”为结尾

### 8.1.1 基本符号集

eg：

![截屏2021-10-06 下午4.15.23](https://typroa-wolves.oss-cn-hangzhou.aliyuncs.com/img-li/%E6%88%AA%E5%B1%8F2021-10-06%20%E4%B8%8B%E5%8D%884.15.23.png)

- <font color="2DC960FF">状态图标是一个圆角矩形</font>
- <font color="2DC960FF">转移是一个带箭头的实线</font>
- <font color="2DC960FF">初始状态是一个黑色实心圆</font>
- <font color="2DC960FF">公牛眼型圆圈代表终点</font>

### 8.1.2 在状态图中增加细节

![image-20211006163821192](https://typroa-wolves.oss-cn-hangzhou.aliyuncs.com/img-li/image-20211006163821192.png)

- <font color="2DC960FF">Name代表状态名</font>
- <font color="00C5FFFF">活动Activities</font>
  - <font color="2DC960FF">出口动作</font>
  - <font color="2DC960FF">入口动作</font>
  - <font color="2DC960FF">动作</font>
- eg：

![151633509792_.pic_hd](https://typroa-wolves.oss-cn-hangzhou.aliyuncs.com/img-li/151633509792_.pic_hd.jpg)

### 8.1.3 增加转移的细节：事件和动作

![截屏2021-10-07 下午5.13.28](https://typroa-wolves.oss-cn-hangzhou.aliyuncs.com/img-li/%E6%88%AA%E5%B1%8F2021-10-07%20%E4%B8%8B%E5%8D%885.13.28.png)

![161633598047_.pic](https://typroa-wolves.oss-cn-hangzhou.aliyuncs.com/img-li/161633598047_.pic.jpg)

- 状态转移线可以指明引起
  - 转移发生的事件**（触发器事件）**
  - 引起状态变化所需执行的计算**（动作）**
- 一个事件会引起没有相关动作的状态转移，或一个转移是由于某个状态完成了他的活动所引起的，称为**无触发器事件**



![截屏2021-10-07 下午5.20.27](https://typroa-wolves.oss-cn-hangzhou.aliyuncs.com/img-li/%E6%88%AA%E5%B1%8F2021-10-07%20%E4%B8%8B%E5%8D%885.20.27.png)

- 保护条件：
  - 放在[]中
  - 满足这个条件状态才能发生转移

## 8.2 子状态

- 某些状态存在于单个状态中，他们被称之为**子状态**
  - 顺序子状态
  - 并发子状态

### 8.2.1 顺序子状态

- 顺序子状态按照顺序一个接着一个出现

![181633600035_.pic_hd](https://typroa-wolves.oss-cn-hangzhou.aliyuncs.com/img-li/181633600035_.pic_hd.jpg)

### 8.2.2 并发子状态

- 两个状态序列直接是并发关系
- 并发状态之间用虚线隔开

![191633600076_.pic_hd](https://typroa-wolves.oss-cn-hangzhou.aliyuncs.com/img-li/191633600076_.pic_hd.jpg)

- Working状态被拆解为两个部分，因此Working状态被称为**组成状态**

## 8.3 历史状态

- 当对象转移出该组成状态，该组成状态能狗记住它的活动子状态

![201633600239_.pic_hd](https://typroa-wolves.oss-cn-hangzhou.aliyuncs.com/img-li/201633600239_.pic_hd.jpg)

- 历史状态由**圆圈中的<font color="red">H</font>表示
- 用一条实现连接到被记忆的子状态
- 箭头指向子状态

- 历史状态的**深浅**：
  - 当一个历史状态记忆了各个嵌套层次的子状态时，这个历史状态就是**深的**  用H表示
  - 当一个历史状态只记忆了最高层嵌入的子状态时，这个历史状态就是**浅的**  用H*表示

## 8.4 UML2.0中的新变化

- **连接点**：用来表示**进入**一个状态或**退出**一个状态的位置

![截屏2021-10-07 下午5.58.20](https://typroa-wolves.oss-cn-hangzhou.aliyuncs.com/img-li/%E6%88%AA%E5%B1%8F2021-10-07%20%E4%B8%8B%E5%8D%885.58.20.png)

- 空心圆圈代表入口
- 圆圈中带有X代表出口

## 8.5 为什么状态图很重要

- 功能

  - 帮助分析员、设计员和开发人员**理解系统中对象的行为**

  - 帮助开发人员**清楚了解对象应该做什么事情**

## 8.5 大图

![211633600906_.pic_hd](https://typroa-wolves.oss-cn-hangzhou.aliyuncs.com/img-li/211633600906_.pic_hd.jpg)
