# UML第九章 顺序图

## 9.1 什么是顺序图

- **顺序图**：由采用通常的方式表示的对象组成：
  - 对象用**矩形**表示，其中带**下划线**的是对象名
  - 消息用**带箭头的实线**表示
  - 时间用**垂直虚线**表示
- 为什么要引入顺序图
  - 引入事件唯独，为对象之间的交互建模
  - 对象之间交互以特定的事件顺序发生

### 9.1.1 对象

![截屏2021-10-07 下午6.08.11](https://typroa-wolves.oss-cn-hangzhou.aliyuncs.com/img-li/%E6%88%AA%E5%B1%8F2021-10-07%20%E4%B8%8B%E5%8D%886.08.11.png)

- 对象向下方伸展的虚线叫做对象的**生命线**

- 生命线上的窄矩形条被称为**激活**

  - 激活表示对象正在进行某个操作

  - 窄矩形条的长度表现出激活的持续时间
  - 持续时间是大概的，不是精确的

### 9.1.2 消息

- 从一条生命线开始，到另一条生命线结束

- 生命线可以说同一个对象的生命线

- 分类

  - **调用消息**：来自消息发送对象的请求，它被传递给消息的接收者对象

    - 它请求接收者对象执行某种操作

    - 通常要等待接收者执行操作，又被称为**同步的消息**

    - ![截屏2021-10-07 下午6.12.35](https://typroa-wolves.oss-cn-hangzhou.aliyuncs.com/img-li/%E6%88%AA%E5%B1%8F2021-10-07%20%E4%B8%8B%E5%8D%886.12.35.png)

  - **返回消息**：来自接收者对象的返回信息

    - ![截屏2021-10-07 下午6.12.48](https://typroa-wolves.oss-cn-hangzhou.aliyuncs.com/img-li/%E6%88%AA%E5%B1%8F2021-10-07%20%E4%B8%8B%E5%8D%886.12.48.png)

  - **异步消息**：发送者吧控制权交给接收者，但不等待操作完成

    - ![截屏2021-10-07 下午6.13.05](https://typroa-wolves.oss-cn-hangzhou.aliyuncs.com/img-li/%E6%88%AA%E5%B1%8F2021-10-07%20%E4%B8%8B%E5%8D%886.13.05.png)

### 9.1.3 时间

- 顺序图中的垂直方向称为**时间维**，时间流逝的方向自顶向下
- 靠近顶部的消息发生的时间比靠近底部的消息早
- 顺序图是二维：
  - 自左至右代表的维数代表对象的布局
  - 自顶向下代表的维数代表时间的流逝

![截屏2021-10-07 下午6.26.59](https://typroa-wolves.oss-cn-hangzhou.aliyuncs.com/img-li/%E6%88%AA%E5%B1%8F2021-10-07%20%E4%B8%8B%E5%8D%886.26.59.png)

## 9.2 汽车和车钥匙

### 9.2.1 类图

- 从静态视角对系统进行描述

![500235882A4705AECD5240F7579DE5BD](https://typroa-wolves.oss-cn-hangzhou.aliyuncs.com/img-li/500235882A4705AECD5240F7579DE5BD.jpg)

- UML没有**发送**符号，而是在依赖关系箭头添加了关键字《send》
- 《signal》：把信号建模成类

### 9.2.2 顺序图

- 从动态视角对系统进行描述
- 匿名对象

![82DB5B9B700F3ED2FE68B5A0F06161B7](https://typroa-wolves.oss-cn-hangzhou.aliyuncs.com/img-li/82DB5B9B700F3ED2FE68B5A0F06161B7.jpg)

- 添加从生命线到生命线箭头来对消息建模。

![9A900A454B0F5710923657002E1A9205](https://typroa-wolves.oss-cn-hangzhou.aliyuncs.com/img-li/9A900A454B0F5710923657002E1A9205.jpg)

- [b="bock"]保护条件：表示“if”条件

### 9.3 饮料销售机

- 顺序图对于建模一个实例场景很有用

![FE5C023007071B6BD2B64E227AEF5FDB](https://typroa-wolves.oss-cn-hangzhou.aliyuncs.com/img-li/FE5C023007071B6BD2B64E227AEF5FDB.jpg)

![EECB662C79C1BEF7DD599E1444976117](https://typroa-wolves.oss-cn-hangzhou.aliyuncs.com/img-li/EECB662C79C1BEF7DD599E1444976117.jpg)

![4779616D934D72E6B596F19D2513CE76](https://typroa-wolves.oss-cn-hangzhou.aliyuncs.com/img-li/4779616D934D72E6B596F19D2513CE76.jpg)

### 9.4 顺序图：一般顺序图

- 上两节只是将一个场景用顺序图描述出来，也就是创建一个实例顺序图
- 绘制顺序图时要考虑用例的所有场景，这样创建的就是一个**一般顺序图**

![D789D23C6212D40E645BC7E1AA1F425F](https://typroa-wolves.oss-cn-hangzhou.aliyuncs.com/img-li/D789D23C6212D40E645BC7E1AA1F425F.jpg)

## 9.6 帧化顺序图

- 特定的帧化的部分叫做**交互事件**，它的操作符上ref
